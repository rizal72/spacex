enum ActionKind {
    Walking,
    Idle,
    Jumping
}
namespace SpriteKind {
    export const counter = SpriteKind.create()
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (bombs > 0) {
        spacePlane.startEffect(effects.halo, 1500)
        for (let bogey of sprites.allOfKind(SpriteKind.Enemy)) {
            bogey.destroy(effects.disintegrate, 200)
            info.changeScoreBy(1)
        }
        music.pewPew.play()
        music.powerUp.play()
        scene.cameraShake(4, 1000)
        bombs += -1
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    dart = sprites.createProjectileFromSprite(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . 2 2 2 2 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, spacePlane, 200, 0)
    music.pewPew.play()
})
function startGame () {
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        `)
    spacePlane = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . 2 . . . . . . . . . . . . . 
        . . 2 2 . . . . . . . . . . . . 
        . . 2 2 2 . . . . . . . . . . . 
        . 5 4 8 8 8 8 8 8 8 8 8 9 . . . 
        5 4 2 8 8 8 2 2 2 2 8 8 9 9 8 . 
        . 5 4 8 8 8 8 8 8 8 8 8 8 8 8 8 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Player)
    animation.runImageAnimation(
    spacePlane,
    [img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . 2 . . . . . . . . . . . . . 
        . . 2 2 . . . . . . . . . . . . 
        . . 2 2 2 . . . . . . . . . . . 
        . 5 4 8 8 8 8 8 8 8 8 8 9 . . . 
        5 4 2 8 8 8 2 2 2 2 8 8 9 9 8 . 
        . 5 4 8 8 8 8 8 8 8 8 8 8 8 8 8 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . 2 . . . . . . . . . . . . . 
        . . 2 2 . . . . . . . . . . . . 
        . . 2 2 2 . . . . . . . . . . . 
        . 2 4 8 8 8 8 8 8 8 8 8 9 . . . 
        2 4 5 8 8 8 2 2 2 2 8 8 9 9 8 . 
        . 2 4 8 8 8 8 8 8 8 8 8 8 8 8 8 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `],
    250,
    true
    )
    spacePlane.setFlag(SpriteFlag.StayInScreen, true)
    controller.moveSprite(spacePlane, 100, 100)
    info.setLife(3)
    bombs = 3
    bCount = sprites.create(assets.image`image0`, SpriteKind.counter)
    bCount.setPosition(40, 5)
    bCountN = sprites.create(assets.image`image5`, SpriteKind.counter)
    bCountN.setPosition(52, 5)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    if (bombs < 3) {
        otherSprite.destroy(effects.halo, 200)
        music.powerUp.play()
        bombs += 1
    }
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy(effects.disintegrate, 200)
    sprite.destroy()
    info.changeScoreBy(1)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy(effects.fire, 100)
    music.jumpDown.play()
    info.changeLifeBy(-1)
})
let bogey: Sprite = null
let bomb: Sprite = null
let star: Sprite = null
let bCountN: Sprite = null
let bCount: Sprite = null
let dart: Sprite = null
let spacePlane: Sprite = null
let bombs = 0
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ....................................22222.......................................................................................................................
    ...................................2.....2......................................................................................................................
    ..................................2.......222...................................................................................................................
    .................................22..........22.................................................................................................................
    .................................2..............................................................................................................................
    .................................2..............................................................................................................................
    .................................2.............................................................................2................................................
    .................................2.............................................................................2.........2......................................
    .................................2..............................................................................2........2......................................
    .................................2..............................................................................22......2.......................................
    ..................................2..............................................................................2.....22.......................................
    ...................................22............................................................................22....2........................................
    .....................................2222222222...................................................................2...22........................................
    ...............................................2..................................................................22..2.........................................
    ...............................................2......22222222.....................................................2.22.........................................
    ...............................................2......2.......22.......222222......................................2.2..........................................
    ...............................................2......2.........2.....22....222.....2222......2222..................2...........................................
    ...............................................2......2.........2.....2......22....22........22..22................222..........................................
    ...............................................2......2.........2....2........2....2........22....2................2.2..........................................
    ...............................................2......2.........2....2........2...2.........2...222................2..2.........................................
    ..............................................22......2.........2....2.......22...2.........2.222.................2...22........................................
    .............................................22......2.........22....2.......22...2........2222...........2.......2....2........................................
    .................................22.........2........2........22.....2......2222..22.......2.......2.............2......2.......................................
    ..................................22.....222.........22......22......22....22..2...2.....2.2.......2............2.......22......................................
    ....................................222222...........222222222.........22222...2...2222222.2......2............22........2......................................
    .....................................................2.........................2...........22....22............2..........2.....................................
    .....................................................2.........................2............222222............22..........2.....................................
    .....................................................2........................................................2.................................................
    .....................................................2........................................................2.................................................
    .....................................................2..........................................................................................................
    .....................................................2..........................................................................................................
    .....................................................2..........................................................................................................
    ....................................................2...........................................................................................................
    ....................................................2...........................................................................................................
    ....................................................2...........................................................................................................
    ....................................................2...........................................................................................................
    ....................................................2...........................................................................................................
    ................................................................................................................................................................
    `)
game.splash("Press 'A' to Play - SpaceX: a game by B&A")
startGame()
game.onUpdate(function () {
    if (Math.percentChance(25)) {
        star = sprites.createProjectileFromSide(assets.image`image3`, randint(-80, -100), 0)
        star.setPosition(scene.screenWidth(), randint(0, scene.screenHeight()))
        star.setFlag(SpriteFlag.Ghost, true)
        star.setFlag(SpriteFlag.AutoDestroy, true)
    }
    bCountN.say(bombs)
})
game.onUpdateInterval(randint(30000, 60000), function () {
    bomb = sprites.create(assets.image`image`, SpriteKind.Food)
    bomb.setVelocity(randint(-50, -80), randint(5, 20))
    bomb.left = scene.screenWidth()
    bomb.y = randint(6, scene.screenHeight() - 6)
    bomb.setFlag(SpriteFlag.AutoDestroy, true)
})
forever(function () {
    music.setVolume(20)
    music.playMelody("E B C5 A B G A F ", 120)
    music.playMelody("E B C5 A B G A F ", 120)
    music.playMelody("E D G F B A C5 B ", 120)
    music.playMelody("E D G F B A C5 B ", 120)
})
game.onUpdateInterval(500, function () {
    bogey = sprites.create(assets.image`image5`, SpriteKind.Enemy)
    animation.runImageAnimation(
    bogey,
    [img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . 9 9 9 9 . . . . . . 
        . . . . . 9 9 9 9 9 9 . . . . . 
        . . . . 9 9 9 9 9 9 9 9 . . . . 
        . . 6 6 6 6 6 6 6 6 6 6 6 6 . . 
        . . 2 6 7 6 2 6 7 6 2 6 7 6 . . 
        . 6 6 6 6 6 6 6 6 6 6 6 6 6 6 . 
        6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 
        . . 6 2 6 . . . . . . 6 2 6 . . 
        . . . 5 . . . . . . . . 5 . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `],
    500,
    true
    )
    bogey.setVelocity(randint(-50, -80), 0)
    bogey.left = scene.screenWidth()
    bogey.y = randint(6, scene.screenHeight() - 6)
    bogey.setFlag(SpriteFlag.AutoDestroy, true)
})
